<% 
    pageTitle = 'Sub specie aeternitatis';
    metaDescription = 'Hi! Hier sammel ich meine Gedanken zu den großen Fragen unserer Zeit. Ich schreibe nach Lust und Laune, meist über Philosophie. Aber auch wissenschaftliche Entdeckungen werden ihren Platz finden. Genau so AI, wie auch andere gesellschaftspolitische Themen.';
%>
<main>
<div class="container-fluid header-section">
    <div class="d-flex justify-content-center align-items-center mb-2">
        <img src="/assets/ornaments/1131824.svg" alt="Ornament" class="ornament ornament-flip-y mr-3">
        <h1 class="mt-5 main-title mb-0">Ratio et Realitas</h1>
        <img src="/assets/ornaments/1131824.svg" alt="Ornament" class="ornament ml-3">
    </div>
    <h2 class="mt-3 sub-title">In statu nascendi</h2>
    <p class="mt-3 description">Ein Blog über Philosophie, Wissenschaft und künstliche Intelligenz</p>
    <hr class="header-divider">
</div>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-3">
            <div class="sidebar">
                <h2 class="sidebar-title mt-4">Beliebte Beiträge</h2>
                <ul class="nav-list" id="popular-posts">
                    <% if (typeof popularPosts !== 'undefined' && Array.isArray(popularPosts) && popularPosts.length > 0) { %>
                        <% popularPosts.forEach(function(p) { %>
                            <li>
                                <% if (p.slug) { %>
                                    <a href="/blogpost/<%= p.slug %>"><%= p.title %></a>
                                <% } else if (p.id !== undefined && p.id !== null) { %>
                                    <a href="/blogpost/by-id/<%= p.id %>"><%= p.title %></a>
                                <% } else { %>
                                    <span><%= p.title %></span>
                                <% } %>
                            </li>
                        <% }); %>
                    <% } else { %>
                        <li class="text-muted small">Keine Daten</li>
                    <% } %>
                </ul>

                <h2 class="sidebar-title mt-4">Kategorien</h2>
                <button type="button" class="btn btn-secondary dropdown-toggle w-100" data-toggle="collapse" data-target="#categoriesCollapse" aria-controls="categoriesCollapse" aria-expanded="false">
                    Kategorien
                </button>
                <div class="collapse mt-2" id="categoriesCollapse">
                    <ul class="list-group">
                        <% categories.forEach(function(category) { %>
                            <li class="list-group-item">
                                <a href="/blogpost/category/<%= category.slug %>"><%= category.name %></a>
                            </li>
                        <% }); %>
                    </ul>
                </div>

                <h2 class="sidebar-title mt-4">Archiv</h2>
                <button type="button" class="btn btn-secondary dropdown-toggle w-100" data-toggle="collapse" data-target="#archiveCollapse" aria-controls="archiveCollapse" aria-expanded="false">
                    Jahr wählen
                </button>
                <div class="collapse mt-2" id="archiveCollapse">
                    <ul class="list-group">
                        <% if (typeof archiveYears !== 'undefined' && Array.isArray(archiveYears) && archiveYears.length > 0) { %>
                            <% archiveYears.forEach(function(y) { %>
                                <li class="list-group-item">
                                    <a href="/blogpost/archive?<%= 'year=' + y %>"><%= y %></a>
                                </li>
                            <% }); %>
                        <% } else { %>
                            <li class="list-group-item">
                                <span class="dropdown-item text-muted">Keine Jahre</span>
                            </li>
                        <% } %>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-9">
            <div class="content-area">
                <h3 class="featured-title">Ausgewählte Beiträge</h3>
                <div class="featured-posts-grid">
                    <% if (typeof featuredPosts !== 'undefined' && Array.isArray(featuredPosts) && featuredPosts.length > 0) { %>
                        <% featuredPosts.forEach(function(fp) { %>
                            <div class="featured-post-card">
                                <h4 class="featured-post-title"><a href="/blogpost/<%= fp.slug %>" class="featured-post-link"><%= fp.title %></a></h4>
                                <p class="featured-post-excerpt"><%= fp.excerpt %></p>
                                <a href="/blogpost/<%= fp.slug %>" class="btn btn-outline-primary">Lesen</a>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <div class="featured-post-card">
                            <h4 class="featured-post-title"><a href="/blogpost/beyond-the-first-magic-trick" class="featured-post-link">AI Agents</a></h4>
                            <p class="featured-post-excerpt">Beyond the first magic trick: The disillusionment with AI agents.</p>
                            <a href="/blogpost/beyond-the-first-magic-trick" class="btn btn-outline-primary">Lesen</a>
                        </div>
                        <div class="featured-post-card">
                            <h4 class="featured-post-title"><a href="/blogpost/vom-archiv-zur-ablenkung" class="featured-post-link">Vom Archiv zur Ablenkung</a></h4>
                            <p class="featured-post-excerpt">ein Blick in die Vergangenheit des Internets – als Cookies noch nur etwas zum Essen waren...</p>
                            <a href="/blogpost/vom-archiv-zur-ablenkung" class="btn btn-outline-primary">Lesen</a>
                        </div>
                        <div class="featured-post-card">
                            <h4 class="featured-post-title"><a href="/blogpost/universitat-wien-wissenschaft-gesinnung" class="featured-post-link">Universität Wien</a></h4>
                            <p class="featured-post-excerpt">Wissenschaft im Dienst der Gesinnung</p>
                            <a href="/blogpost/universitat-wien-wissenschaft-gesinnung" class="btn btn-outline-primary">Lesen</a>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container my-5">
    <h3 class="featured-title">Fundstücke & Empfehlungen</h3>
    <div class="row" id="discoveries-grid">
        <% if (typeof cards !== 'undefined' && Array.isArray(cards) && cards.length > 0) { %>
            <% cards.slice(0, 9).forEach(function(card) { %>
                <div class="col-md-4 mb-4">
                    <div class="card discovery-card h-100">
                        <% if (card.img_link) { %>
                            <img class="card-img-top" src="<%= card.img_link %>" alt="<%= card.title %>">
                        <% } %>
                        <div class="card-body">
                            <h5 class="card-title"><%= card.title %></h5>
                            <% if (card.subtitle) { %>
                                <p class="card-text"><%= card.subtitle %></p>
                            <% } %>
                        </div>
                        <div class="card-footer bg-transparent">
                            <a href="<%= card.link %>" class="btn btn-outline-primary" target="_blank" rel="noopener noreferrer">Mehr lesen</a>
                        </div>
                    </div>
                </div>
            <% }); %>
        <% } else { %>
            <div class="col-12 text-muted">Keine Empfehlungen verfuegbar.</div>
        <% } %>
    </div>
</div>
</main>
